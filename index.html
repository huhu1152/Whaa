
<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Ù…Ø¹Ø±ÙØ© Ù†ÙˆØ¹ Ø§Ù„Ø­Ø¬Ø± Ø§Ù„ÙƒØ±ÙŠÙ…</title>
    <style>
        body {
            background-color: #0f172a;
            color: white;
            font-family: 'Arial', sans-serif;
            text-align: center;
            padding: 30px;
        }
        h1 {
            color: #22c55e;
        }
        input[type="file"], button {
            padding: 10px;
            margin: 10px;
        }
        #result {
            margin-top: 20px;
            font-size: 1.2em;
            color: #facc15;
        }
        .error {
            color: #ef4444;
        }
    </style>
</head>
<body>
    <h1>ğŸ” Ù…Ø¹Ø±ÙØ© Ù†ÙˆØ¹ Ø§Ù„Ø­Ø¬Ø± Ø§Ù„ÙƒØ±ÙŠÙ…</h1>
    <input type="file" id="imageInput">
    <br>
    <button onclick="predict()">ØªØ¹Ø±Ù‘Ù Ø¹Ù„Ù‰ Ø§Ù„Ø­Ø¬Ø±</button>
    <div id="result">Ù†ØªÙŠØ¬Ø© Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø³ØªØ¸Ù‡Ø± Ù‡Ù†Ø§</div>

    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@4.13.0/dist/tf.min.js"></script>
    <script>
        let model;

        async function loadModel() {
            try {
                model = await tf.loadLayersModel('model/model.json');
                document.getElementById('result').textContent = 'âœ… ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ Ø¨Ù†Ø¬Ø§Ø­.';
            } catch (error) {
                document.getElementById('result').innerHTML = '<span class="error">âŒ ÙØ´Ù„ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬: ' + error.message + '</span>';
            }
        }

        async function predict() {
            const fileInput = document.getElementById('imageInput');
            const resultDiv = document.getElementById('result');
            if (!fileInput.files.length) {
                resultDiv.innerHTML = '<span class="error">ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± ØµÙˆØ±Ø© Ø£ÙˆÙ„Ø§Ù‹</span>';
                return;
            }

            const img = new Image();
            const reader = new FileReader();
            reader.onload = function(e) {
                img.src = e.target.result;
                img.onload = async function() {
                    const tensor = tf.browser.fromPixels(img)
                        .resizeNearestNeighbor([224, 224])
                        .toFloat()
                        .div(255.0)
                        .expandDims();

                    const prediction = model.predict(tensor);
                    const result = await prediction.array();
                    const index = result[0].indexOf(Math.max(...result[0]));
                    resultDiv.textContent = 'ğŸ” Ù†ÙˆØ¹ Ø§Ù„Ø­Ø¬Ø± Ø§Ù„Ù…ØªÙˆÙ‚Ø¹: ' + index;
                };
            };
            reader.readAsDataURL(fileInput.files[0]);
        }

        loadModel();
    </script>
</body>
</html>
